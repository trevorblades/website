---
title: Let's talk about n-gons
description: Spiralling into the world of geometry
---

Earlier this year, I thought it would be cool to try building a spiralling triangle of text using HTML and CSS. I suppose it had no practical benefit, but like I said, I thought it would be cool. And it was.

I started by sketching in my notebook to wrap my head around the ways in which I could achieve this effect. I landed on a technique that I'll call the "curly caterpillar" method.

## The Curly Caterpillar™

First, I lay out each of my triangle sides horizontally with each one nested within the side before it. Then I use a CSS `transform` to `rotate()` each of the sides around their left axis. Because the sides are nested, a rotation to one side will also rotate its already rotated children, causing this "curling" effect.

> Try it out below. As you apply rotation to the joints between the three segments below, they curl inward to form a triangle.

import CaterpillarDemo from '../../components/CaterpillarDemo';

<CaterpillarDemo />

In React, one of these segment components might look something like the following. Notice the segment width is applied to the inner `span` and the rotation is applied to the outer flex parent. Each subsequent segment is nested within the previous, after the `span`. That's what the `children` prop is for.

```jsx
function Segment({children, value, width, rotation}) {
  return (
    <div
      style={{
        display: 'flex',
        transformOrigin: 'left',
        transform: `rotate(${rotation}deg)`
      }}
    >
      <span
        style={{
          flexShrink: 0,
          width
        }}
      >
        {value}
      </span>
      {children}
    </div>
  );
}
```

To create this line of segments, arrange the above segment components like so:

```jsx
function Triangle() {
  const width = 100;
  const rotation = 120;
  return (
    // the outermost segment gets no rotation
    <Segment value="first" width={width} rotation={0}>
      <Segment value="second" width={width} rotation={rotation}>
        {/* the innermost segment gets no further children */}
        <Segment value="third" width={width} rotation={rotation} />
      </Segment>
    </Segment>
  );
}
```

## Creating space

a² + b² = c²

- The idea
- Creating a triangle by cascading CSS rotations
- Calculating the degree of each rotations

Once upon a time, I wanted to build a spiral...

- laying out text as a spiral
- first idea (caterpillar)
- text segments nested within eachother
- each segment's rotation rotates its children too, curling up like a pill bug
- how much should each segment rotate?
- how to maintain space between layers of the spiral?
- how to decide where to clip text? first approach: manually supply text segments
- problem with that: doesn't work reliably when the # of sides changes or the size of the spiral changes
- auto-splitting text might leave a bunch of empty space
- solution: just keep repeating the text if it ends early

another para

- talk about circle expanding to viewport
- pixel site does this: https://store.google.com/ca/product/pixel_5?hl=en-GB
- trig principles at play here
