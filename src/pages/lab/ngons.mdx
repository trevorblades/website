---
title: Let's Talk Regular Polygons
description: Spiralling into the world of geometry
---

Earlier this year, I thought it would be cool to try building a spiralling triangle of text using HTML and CSS. I suppose it had no practical benefit, but like I said, I thought it would be cool. And it was.

I started by sketching in my notebook to wrap my head around the ways in which I could achieve this effect. I landed on a technique that I'll call the "curly caterpillar" method.

## The Curly Caterpillarâ„¢

First, I lay out each of my triangle sides horizontally with each one nested within the side before it. Then I use a CSS `transform` to `rotate()` each of the sides around their left axis. Because the sides are nested, a rotation to one side will also rotate its already rotated children, causing this "curling" effect.

> Try it out below. As you apply rotation to the joints between the three segments below, they curl inward to form a triangle.

import CaterpillarDemo from '../../components/CaterpillarDemo';

<CaterpillarDemo />

In React, one of these segment components might look something like the following. Notice the segment width is applied to the inner `span` and the rotation is applied to the outer flex parent. Each subsequent segment is nested within the previous one, after the `span` using the `children` prop.

```jsx
function Segment({children, value, width, rotation}) {
  return (
    <div
      style={{
        display: 'flex',
        transformOrigin: 'left',
        transform: `rotate(${rotation}deg)`
      }}
    >
      <span
        style={{
          flexShrink: 0,
          width
        }}
      >
        {value}
      </span>
      {children}
    </div>
  );
}
```

To create a triangle, arrange the above `Segment` components like the following example, and rotate all but the first segment **120Â°**.

The triangle I'm trying to build is [equilateral](https://en.wikipedia.org/wiki/Equilateral_polygon), meaning each of its side lengths and angles are the same. Since the sum of all interior angles in any triangle must equal 180Â°, each _interior angle_ will be 60Â°. Knowing that each _exterior angle_ can be calculated as the sum of two interior angles, each exterior angle must be 120Â°. That's the amount that I need to rotate each segment to turn my flat line into a triangle.

> To learn more about basic laws of triangles, [check out this article](https://en.wikipedia.org/wiki/Triangle#Basic_facts) that explains things much better and with diagrams ðŸ”¥

```jsx
function Triangle() {
  const width = 100; // in pixels
  const interiorAngle = 180 / 3; // in degrees
  const exteriorAngle = interiorAngle * 2; // or 180 - interiorAngle
  return (
    // the outermost segment gets no rotation
    <Segment value="first" width={width} rotation={0}>
      <Segment value="second" width={width} rotation={exteriorAngle}>
        {/* the innermost segment gets no further children */}
        <Segment value="third" width={width} rotation={exteriorAngle} />
      </Segment>
    </Segment>
  );
}
```

## Creating space

The story doesn't end here. I am trying to create a **spiral** triangle, after all. That means after drawing the first three sides, the shape needs to continue rotating inward as long as there's room to create new segments.

The amount of room needed to draw a segment is related to the desired amount of space between parallel lines in the spiral. Let's use the following spiral with simplified measurements as an example. Its first two segments are 100 units long, and it has 20 units of spacing between its parallel lines.

import {Spiral1, Spiral2, Spiral3} from '../../components/Spirals';

<Spiral1 style={{height: 300}} />

In order to continue drawing this spiral, I needed to figure out the length of its third side. At first glance, the answer might seem obvious: just subtract 20 from the original side length of 100, and we get a side length of 80.

Unfortunately, it's not that simple. This calculation results in a side that's slightly too long to ensure the following lines are correctly spaced.

<Spiral2 style={{height: 300}} />

To find the appropriate length for side 3 and greater, we need to first calculate the length of the piece that needs to be removed. In the diagram below, I've labelled that part as $A$.

If you look closely at side $A$, it's the hypoteneuse of an imaginary right triangle that has an opposite side length equal to the gap between parallel lines in the spiral (20). We also know that one of the angles is 60Â° because that's the same as each interior angle in the triangle.

<Spiral3 style={{height: 300}} />

With this knowledge, we can apply basic trigonometry to solve for $A$. Remember [**SohCahToa**](https://en.wikipedia.org/wiki/Trigonometry#Mnemonics)? Since we have the length of the opposite side ($O$) and want to solve for the hypoteneuse ($H$), we must use the sine function in this calculation.

$$
\begin{aligned}
  sin(Î¸) = \frac{O}{H} \\
  sin(60Â°) = \frac{20}{A} \\
  A = \frac{20}{sin(60Â°)} \\
  A \approx 23.09
\end{aligned}
$$

Now solving for $B$ is as easy as subtracting $A$ from the original side length of 100.

$$
\begin{aligned}
B = 100 - A \\
B \approx 100 - 23.09 \\
B \approx 76.91
\end{aligned}
$$

This process must

aÂ² + bÂ² = cÂ²

- The idea
- Creating a triangle by cascading CSS rotations
- Calculating the degree of each rotations

Once upon a time, I wanted to build a spiral...

- laying out text as a spiral
- first idea (caterpillar)
- text segments nested within eachother
- each segment's rotation rotates its children too, curling up like a pill bug
- how much should each segment rotate?
- how to maintain space between layers of the spiral?
- how to decide where to clip text? first approach: manually supply text segments
- problem with that: doesn't work reliably when the # of sides changes or the size of the spiral changes
- auto-splitting text might leave a bunch of empty space
- solution: just keep repeating the text if it ends early

another para

- talk about circle expanding to viewport
- pixel site does this: https://store.google.com/ca/product/pixel_5?hl=en-GB
- trig principles at play here
- sidenote about how to get katex working with gatsby + mdx
